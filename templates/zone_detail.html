{% extends "base.html" %}

{% block content %}
<div class="page-header">
    <button class="btn btn-back" onclick="window.history.back()">
        <i class="fas fa-arrow-left"></i> Назад
    </button>
    <h2>{{ zone.name }}</h2>
    <button class="btn btn-primary" id="addBoxBtn">
        <i class="fas fa-plus"></i> Добавить коробку
    </button>
</div>

{% if zone.description %}
<p class="zone-description">{{ zone.description }}</p>
{% endif %}

<div class="boxes-grid">
    {% for box in boxes %}
    <div class="box-card" data-box-id="{{ box.id }}">
        <div class="box-header">
            <h3>{{ box.name }}</h3>
            <div class="box-actions">
                <button class="btn-icon edit-box-btn" data-box-id="{{ box.id }}" data-box-name="{{ box.name }}" data-box-description="{{ box.description }}">
                    <i class="fas fa-edit"></i>
                </button>
                <button class="btn-icon btn-danger delete-box-btn" data-box-id="{{ box.id }}">
                    <i class="fas fa-trash"></i>
                </button>
            </div>
        </div>
        {% if box.description %}
        <p class="box-description">{{ box.description }}</p>
        {% endif %}
    </div>
    {% endfor %}
</div>

<!-- Модальное окно добавления/редактирования коробки -->
<div id="boxModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 id="boxModalTitle">Добавить коробку</h3>
            <span class="close" id="closeBoxModal">&times;</span>
        </div>
        <div class="modal-body">
            <form id="boxForm">
                <input type="hidden" id="boxId">
                <input type="hidden" id="zoneId" value="{{ zone.id }}">
                <div class="form-group">
                    <label for="boxName">Название коробки:</label>
                    <input type="text" id="boxName" required>
                </div>
                <div class="form-group">
                    <label for="boxDescription">Описание:</label>
                    <textarea id="boxDescription" rows="3"></textarea>
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" id="cancelBoxBtn">Отмена</button>
            <button class="btn btn-primary" id="saveBoxBtn">Сохранить</button>
        </div>
    </div>
</div>
{% endblock %}